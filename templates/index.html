{% extends "base.html" %}
{% block titulo %}Inicio · Clubes de Lectura{% endblock %}

{% block contenido %}
  {% with msgs = get_flashed_messages() %}
    {% if msgs %}
      <div style="margin:0 0 16px">
        {% for m in msgs %}
          <div style="background:linear-gradient(180deg,#ecfeff,#cffafe);
                      color:#0b1020;border:1px solid rgba(2,132,199,.25);
                      padding:10px 14px;border-radius:12px;box-shadow:0 6px 14px rgba(2,132,199,.25);
                      font-weight:600;letter-spacing:.2px;margin-bottom:8px;">
            {{ m }}
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <div class="hero" style="text-align:center">
    <div class="col" style="margin:auto">
      <div class="eyebrow">Bienvenido</div>
      <h1>Clubes de lectura</h1>
      <p class="lead" style="max-width:60ch;margin:0 auto 1rem">
        Presiona “Cargar datos” para inicializar el grafo.
      </p>
      <div class="actions" style="justify-content:center">
        <form action="{{ url_for('ruta_cargar_datos') }}" method="post" enctype="multipart/form-data">
          
          <!-- Input oculto para archivos -->
          <input id="datos" type="file" name="datos" multiple accept=".csv" style="display:none" onchange="checkFilesSelected()">

          <!-- Botón para seleccionar archivos -->
          <button class="btn" type="button" 
                  onclick="document.getElementById('datos').click()" 
                  style="font-weight:bold; margin-right:8px;">
            Seleccionar CSVs
          </button>

          <!-- Botón para enviar, inicialmente deshabilitado -->
          <button class="btn" type="submit" id="cargarBtn" style="font-weight:bold;" disabled>
            Cargar datos
          </button>

        </form>
      </div>
    </div>
  </div>

  <style>
    /* Estilo del botón deshabilitado */
    #cargarBtn:disabled {
      background-color: #cccccc; 
      color: #666666;
      cursor: not-allowed;
      opacity: 0.6;
    }

    /* Estilo del botón habilitado */
    #cargarBtn:not(:disabled) {
      background-color: #0ea5e9; 
      color: #000;
      cursor: pointer;
      opacity: 1;
      transition: background-color 0.2s ease;
    }

    #cargarBtn:not(:disabled):hover {
      background-color: #0284c7; /
    }
  </style>

  <script>
    function checkFilesSelected() {
      const input = document.getElementById('datos');
      const btn = document.getElementById('cargarBtn');
      btn.disabled = input.files.length === 0;
    }
  </script>
{% endblock %}
