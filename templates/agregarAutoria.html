{% extends "base.html" %}

{% block titulo %}Agregar autorÃ­a Â· Clubes de Lectura{% endblock %}

{% block contenido %}
  <div class="hero" style="text-align:center; padding-top: 2rem;">
    <div class="col" style="margin:auto; max-width:820px; text-align:left;">
      <div class="eyebrow" style="font-weight: bold; color: #000;">AutorÃ­as</div>
      <h1>Agregar autorÃ­a</h1>
      <p class="lead" style="text-align: center; font-size: 1.1rem; margin-bottom: 1.25rem; color:#000;">
        Selecciona al autor y marca uno o varios libros.
      </p>

      <form action="{{ url_for('agregar_autoria') }}" method="post" style="margin-top: 1rem;">

        <!-- Autor (selecciÃ³n Ãºnica) -->
        <div class="form-control" style="margin-bottom: 1.25rem;">
          <label for="autor_id" style="font-weight: 600; margin-bottom: .5rem; color:#000;">Autor</label>
          <select name="id" id="autor_id" required
                  style="width: 100%; padding: .8rem; font-size: 1rem; border-radius: 8px; border: 1px solid #ccc;">
            <option value="">-- Seleccionar autor --</option>
            {# Espera un dict autores de tipo {id: {nombre, nacionalidad}} #}
            {% for id, data in autores.items() %}
              <option value="{{ id }}">{{ id }} â€” {{ data.nombre }}</option>
            {% endfor %}
          </select>
        

        <!-- Libros (mÃºltiple con checkboxes) -->
        <div class="form-control" style="margin-bottom: 1.25rem;">
          <label style="font-weight: 600; margin-bottom: .5rem; color:#000;">Libros</label>

          <div id="listaLibros"
               style="max-height: 300px; overflow:auto; padding:.25rem .5rem; border:1px solid #ccc; border-radius:10px; background:#fff;">
            {# Espera un dict libros de tipo {id: {titulo, genero, anno}} #}
            {% for id, data in libros.items() %}
              <label class="chk" style="display:block; margin-bottom:.25rem; cursor:pointer; color:#000;">
                <input type="checkbox" name="libro_ids" value="{{ id }}" style="margin-right:.5rem;">
                <span>{{ id }} â€” {{ data.titulo }} ({{ data.anno }})</span>
              </label>
            {% endfor %}
          </div>
        </div>
            <small style="display:block; margin-top:.5rem; color:#000;">
                Puedes marcar uno o varios libros.
            </small>

        <!-- Acciones -->
        <div class="actions" style="display:flex; justify-content:flex-end; gap: .8rem; margin-top: 1.25rem;">
          <a class="btn btn--secondary" href="{{ url_for('pagina_principal') }}"
             style="text-decoration:none; background-color:#e0e0e0; color:#000;">â¬… Volver</a>
          <button class="btn btn--primary" type="submit"
                  style="padding:.8rem 1.6rem; font-size:1rem; border-radius:10px;">ðŸ’¾ Guardar</button>
        </div>
      </form>
    </div>
  </div>
{% endblock %}
